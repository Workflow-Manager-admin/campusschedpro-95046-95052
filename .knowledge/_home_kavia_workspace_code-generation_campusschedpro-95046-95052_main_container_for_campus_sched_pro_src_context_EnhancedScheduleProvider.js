{"is_source_file": true, "format": "JavaScript", "description": "This file defines the React context provider component 'EnhancedScheduleProvider' for managing and subscribing to campus scheduling data, including real-time WebSocket subscriptions via Supabase, data fetching with retry logic, and room constraint validation within a campus scheduling application.", "external_files": ["../hooks/useDataFetch", "../utils/supabaseErrorHandler", "../utils/supabaseClient", "../utils/roomUtils", "./ScheduleContext"], "external_methods": ["useDataFetch.execute", "handleSupabaseError", "isRoomSuitableForCourse", "ScheduleContext"], "published": ["EnhancedScheduleProvider", "useSchedule"], "classes": [], "methods": [{"name": "subscribeToSchedules", "description": "Helper to subscribe to real-time updates on the 'schedules' table via Supabase."}, {"name": "subscribeToRoomAllocations", "description": "Helper to subscribe to real-time updates on the 'room_allocations' table."}, {"name": "subscribeToConflicts", "description": "Helper to subscribe to real-time updates on the 'scheduling_conflicts' table."}, {"name": "subscribeToCourses", "description": "Helper to subscribe to real-time updates on the 'courses' table."}, {"name": "checkRoomConstraints", "description": "Validates if a course's assigned room is suitable and logs any violations."}, {"name": "fetchAllData", "description": "Initial data load fetching schedules, room allocations, courses, and conflicts."}, {"name": "handleRetry", "description": "Function to manually retry fetching data after failures."}, {"name": "handleCloseNotification", "description": "Closes the notification snackbar."}, {"name": "handleScheduleUpdate", "description": "Updates the schedule data and shows a success notification."}], "calls": ["supabase.from('schedules').select('*')", "supabase.from('room_allocations').select('*')", "supabase.from('courses').select('*')", "supabase.from('scheduling_conflicts').select('*')", "supabase.from('rooms').select('*').eq('id', course.roomId).single()", "supabase.from('constraint_violations').insert(...)"], "search-terms": ["EnhancedScheduleProvider", "React context", "Supabase real-time subscriptions", "campus scheduling", "room constraints", "schedule data management"], "state": 2, "file_id": 107, "knowledge_revision": 509, "git_revision": "0a272f029c1e4ce10a18eac3f1e16a979e0ddeb9", "revision_history": [{"373": "0863fa82174b2d11e16bae5245e21ef3545ebcb5"}, {"406": "574228625c08cde72b73d6fe9ff8b10503f952c8"}, {"417": "6324730e1fe2711ca4b5fa2dd4a727cfc2cb19fa"}, {"419": "27e1aad32e987f63d36d6271b7899ac4f3a9cf26"}, {"420": "a22f6ade42f31b026795197a7ab850c4f0071216"}, {"448": "8aa3acdfd7a61e577fe55085b73118e306563ae1"}, {"467": "e805b16c44a8fd84c9af130c9ecd6bf869e4c3b2"}, {"478": "07a030964f006e12a70ea37eb12b1293cf136f67"}, {"485": "b0d7dadbfdae9277615e384139320ad5c399821f"}, {"489": "27d0664abffd69ab9220458c1ea4fdd990e61c28"}, {"490": "74db4fb0e943a68526686edcc9866b30cad723a3"}, {"491": "74db4fb0e943a68526686edcc9866b30cad723a3"}, {"492": "291ba82b88020bc4d8a6d9ab6a88542591ab9062"}, {"493": "70676f33b17fb50524f045ab79605ac5b979ad20"}, {"504": "e787e583585406d266570694d85239e7955622d7"}, {"505": "56eb3ca981a3a79a5ffc6ae30fa9c5cb2e308efc"}, {"507": "0b71b76a4e784b3f077b04499c68cddd3e95cef3"}, {"509": "0a272f029c1e4ce10a18eac3f1e16a979e0ddeb9"}], "ctags": [{"_type": "tag", "name": "6000", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/EnhancedScheduleProvider.js", "pattern": "/^        autoHideDuration={6000}$/", "language": "JavaScript", "kind": "field", "scope": "autoHideDuration", "scopeKind": "class"}, {"_type": "tag", "name": "EnhancedScheduleProvider", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/EnhancedScheduleProvider.js", "pattern": "/^export const EnhancedScheduleProvider = ({ children }) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "checkRoomConstraints", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/EnhancedScheduleProvider.js", "pattern": "/^  const checkRoomConstraints = useCallback(async (course) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "children", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/EnhancedScheduleProvider.js", "pattern": "/^export const EnhancedScheduleProvider = ({ children }) => {$/", "language": "JavaScript", "kind": "field", "scope": "EnhancedScheduleProvider", "scopeKind": "class"}, {"_type": "tag", "name": "context", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/EnhancedScheduleProvider.js", "pattern": "/^  const context = useContext(ScheduleContext);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "contextValue", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/EnhancedScheduleProvider.js", "pattern": "/^    <ScheduleContext.Provider value={contextValue}>$/", "language": "JavaScript", "kind": "field", "scope": "Provider", "scopeKind": "class"}, {"_type": "tag", "name": "contextValue", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/EnhancedScheduleProvider.js", "pattern": "/^  const contextValue = {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handleCloseNotification", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/EnhancedScheduleProvider.js", "pattern": "/^          onClose={handleCloseNotification}$/", "language": "JavaScript", "kind": "field", "scope": "onClose", "scopeKind": "class"}, {"_type": "tag", "name": "handleCloseNotification", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/EnhancedScheduleProvider.js", "pattern": "/^        onClose={handleCloseNotification}$/", "language": "JavaScript", "kind": "field", "scope": "onClose", "scopeKind": "class"}, {"_type": "tag", "name": "handleCloseNotification", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/EnhancedScheduleProvider.js", "pattern": "/^  const handleCloseNotification = useCallback(() => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handleRetry", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/EnhancedScheduleProvider.js", "pattern": "/^  const handleRetry = useCallback(async () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handleScheduleUpdate", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/EnhancedScheduleProvider.js", "pattern": "/^  const handleScheduleUpdate = useCallback((newSchedule) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handleSubscriptionError", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/EnhancedScheduleProvider.js", "pattern": "/^  const handleSubscriptionError = useCallback((error) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "notification", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/EnhancedScheduleProvider.js", "pattern": "/^            notification.severity === 'error' && retryCount < 3 ? ($/", "language": "JavaScript", "kind": "field", "scope": "action", "scopeKind": "class"}, {"_type": "tag", "name": "notification", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/EnhancedScheduleProvider.js", "pattern": "/^          severity={notification.severity}$/", "language": "JavaScript", "kind": "field", "scope": "severity", "scopeKind": "class"}, {"_type": "tag", "name": "notification", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/EnhancedScheduleProvider.js", "pattern": "/^        open={notification.open}$/", "language": "JavaScript", "kind": "field", "scope": "open", "scopeKind": "class"}, {"_type": "tag", "name": "scheduleData", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/EnhancedScheduleProvider.js", "pattern": "/^    scheduleData,$/", "language": "JavaScript", "kind": "field", "scope": "contextValue", "scopeKind": "class"}, {"_type": "tag", "name": "setConflicts", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/EnhancedScheduleProvider.js", "pattern": "/^  const [conflicts, setConflicts] = useState(null);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setCourses", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/EnhancedScheduleProvider.js", "pattern": "/^  const [courses, setCourses] = useState(null);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setNotification", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/EnhancedScheduleProvider.js", "pattern": "/^  const [notification, setNotification] = useState({ open: false, message: '', severity: 'info' /", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setRetryCount", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/EnhancedScheduleProvider.js", "pattern": "/^  const [retryCount, setRetryCount] = useState(0);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setRoomAllocations", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/EnhancedScheduleProvider.js", "pattern": "/^  const [roomAllocations, setRoomAllocations] = useState(null);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setScheduleData", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/EnhancedScheduleProvider.js", "pattern": "/^  const [scheduleData, setScheduleData] = useState(null);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "showNotification", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/EnhancedScheduleProvider.js", "pattern": "/^  const showNotification = useCallback((message, severity = 'info') => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "subscribeToConflicts", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/EnhancedScheduleProvider.js", "pattern": "/^const subscribeToConflicts = (callback) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "subscribeToCourses", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/EnhancedScheduleProvider.js", "pattern": "/^const subscribeToCourses = (callback) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "subscribeToRoomAllocations", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/EnhancedScheduleProvider.js", "pattern": "/^const subscribeToRoomAllocations = (callback) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "subscribeToSchedules", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/EnhancedScheduleProvider.js", "pattern": "/^const subscribeToSchedules = (callback) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "useSchedule", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/EnhancedScheduleProvider.js", "pattern": "/^export const useSchedule = () => {$/", "language": "JavaScript", "kind": "constant"}], "filename": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/EnhancedScheduleProvider.js", "hash": "1f5e2a9a4a704b2e4a1374f096dedfab", "format-version": 4, "code-base-name": "default", "fields": [{"name": "autoHideDuration={6000}", "scope": "autoHideDuration", "scopeKind": "class", "description": "unavailable"}, {"name": "export const EnhancedScheduleProvider = ({ children }) => {", "scope": "EnhancedScheduleProvider", "scopeKind": "class", "description": "unavailable"}, {"name": "<ScheduleContext.Provider value={contextValue}>", "scope": "Provider", "scopeKind": "class", "description": "unavailable"}, {"name": "onClose={handleCloseNotification}", "scope": "onClose", "scopeKind": "class", "description": "unavailable"}, {"name": "notification.severity === 'error' && retryCount < 3 ? (", "scope": "action", "scopeKind": "class", "description": "unavailable"}, {"name": "severity={notification.severity}", "scope": "severity", "scopeKind": "class", "description": "unavailable"}, {"name": "open={notification.open}", "scope": "open", "scopeKind": "class", "description": "unavailable"}, {"name": "scheduleData,", "scope": "contextValue", "scopeKind": "class", "description": "unavailable"}]}