{"is_source_file": true, "format": "JavaScript", "description": "This file defines a React context and provider for managing school schedule data, including fetching data from a backend via Supabase, managing state for courses, rooms, and schedule, and providing functions for CRUD operations, conflict resolution, and real-time updates.", "external_files": ["../utils/scheduleUtils", "../utils/supabaseClient", "@supabase/supabase-js"], "external_methods": ["findScheduleConflicts", "getAllCourses", "getAllRooms", "getSchedule", "saveCourse", "saveRoom", "deleteCourse", "deleteRoom", "unscheduleCourse", "createClient"], "published": ["useSchedule", "ScheduleProvider"], "classes": [], "methods": [{"name": "useSchedule", "description": "Custom hook to access the ScheduleContext and ensure it is used within a ScheduleProvider."}, {"name": "ScheduleProvider", "description": "React component that provides schedule state and actions context for its children, handles data loading, real-time subscriptions, and various schedule management functions."}, {"name": "loadInitialData", "description": "Asynchronous function to load initial data for courses, rooms, and schedule, and to set up real-time subscriptions for data updates."}, {"name": "updateAllocations", "description": "Calculates room allocations based on the current schedule data."}, {"name": "assignRoom", "description": "Assigns a specific room to a course at a given day and timeslot."}, {"name": "resolveConflict", "description": "Handles conflict resolution within the schedule based on provided resolution strategies."}, {"name": "removeCourseFromSlot", "description": "Removes a course from a specific schedule slot, updating both local state and backend."}, {"name": "addCourse", "description": "Creates a new course and updates local state."}, {"name": "updateCourse", "description": "Updates existing course data in backend and local state, including schedule references."}, {"name": "deleteCourseById", "description": "Deletes a course by ID, updating schedule and conflicts accordingly."}, {"name": "addRoom", "description": "Creates a new room and updates local state."}, {"name": "updateRoom", "description": "Updates existing room data in backend and references in schedule."}, {"name": "deleteRoomById", "description": "Deletes a room and updates schedule and room allocations accordingly."}, {"name": "showNotification", "description": "Displays a notification message to the user."}, {"name": "handleCloseNotification", "description": "Closes the notification message."}, {"name": "refreshData", "description": "Reloads all initial schedule data and subscriptions."}], "calls": ["findScheduleConflicts", "getAllCourses", "getAllRooms", "getSchedule", "saveCourse", "saveRoom", "deleteCourse", "deleteRoom", "unscheduleCourse", "createClient", "useState", "useEffect", "useContext", "useCallback"], "search-terms": ["ScheduleContext", "ScheduleProvider", "React createContext", "supabase-js", "scheduleUtils", "realtime subscriptions", "conflict resolution", "schedule management", "courses state", "rooms state"], "state": 2, "file_id": 50, "knowledge_revision": 429, "git_revision": "1b165cd8c095098eb24bd4a27be3d3c9d4de4e62", "revision_history": [{"165": "43fe12b44c5821b6fb375cd08c3c404c88e7692c"}, {"194": "4eb7112e224211c59a2813ab2943fea0c3e2778e"}, {"195": "4b50f4ec327ae9224a622cb1668da0c345323d21"}, {"196": "7de1ed46a162c8e9eea89001bdd9cc06e640274b"}, {"205": "e719ddae83de10752be056a550ccacb1acae105c"}, {"206": "9558ad8ff34695fa25ed861a8e3fd0ec2355ebfd"}, {"207": "7d086c816ad97bf4ce22d2c9636a7d2c0f5d9097"}, {"210": "5574142c3f70eb8eccac478c7f0ccefd3af6f33f"}, {"213": "8d7112b9f12c5dfc3633f6f16f1e028b52f67501"}, {"215": "6de49a3e2284fa2f750ae3328dbdd0d24c76ba47"}, {"216": "9557da7f328cc2c79e312748586b01f6e3ccb0e2"}, {"271": "b7cb6d7e5fd0159b2ae7e0edf3f996f6ab04bdf6"}, {"332": "f1ee3ef153853fead5f423ed1901cfc1b0b30001"}, {"358": "afe9339bd90c5e63701e4e658bd9882f2c14bca4"}, {"359": "afe9339bd90c5e63701e4e658bd9882f2c14bca4"}, {"374": "8f9d009e81a048133a8e6d555d8bf1cf4525e0a8"}, {"375": "28844ac97b91a9e1c7cccbf5f23285072ae41a29"}, {"376": "54d4f61bf362778f28e3c924dffff4c83b836080"}, {"377": "198521aabea76a81a15996706cbcef019e0e511a"}, {"378": "607ec614ad17d669cb43f5e7382c893cfb0a213e"}, {"379": "61abe82442248e1c83ed7480ec4da331f3dd9a8e"}, {"380": "61abe82442248e1c83ed7480ec4da331f3dd9a8e"}, {"394": "d8710825ca4fd4342671b9d0f4a6342adfcda921"}, {"395": "55d78a412b6112a04c5c844366e791852e8f87fe"}, {"396": "4ea94ea3281887fb0e8fe5226733d45ccf54b13a"}, {"397": "235f800f9e1fca3bc63862478ab29a992cee9587"}, {"398": "235f800f9e1fca3bc63862478ab29a992cee9587"}, {"423": "453bcd97754359767dfb7dc21e996a8e384b5b05"}, {"424": "ad9b72dedbb0d7ee1d8dee8fe00aaf58ac027eff"}, {"425": "ad9b72dedbb0d7ee1d8dee8fe00aaf58ac027eff"}, {"426": "d74ac42a7b66fe243a00323d370c63104bae811c"}, {"429": "1b165cd8c095098eb24bd4a27be3d3c9d4de4e62"}], "ctags": [{"_type": "tag", "name": "ScheduleContext", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^const ScheduleContext = createContext();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "ScheduleProvider", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^export const ScheduleProvider = ({ children }) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "addCourse", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^  const addCourse = async (courseData) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "addRoom", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^  const addRoom = async (roomData) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "allocations", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^    const allocations = {};$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "assignRoom", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^  const assignRoom = async (courseId, roomId, day, timeSlot) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "children", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^export const ScheduleProvider = ({ children }) => {$/", "language": "JavaScript", "kind": "field", "scope": "ScheduleProvider", "scopeKind": "class"}, {"_type": "tag", "name": "context", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^  const context = useContext(ScheduleContext);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "contextValue", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^    <ScheduleContext.Provider value={contextValue}>$/", "language": "JavaScript", "kind": "field", "scope": "Provider", "scopeKind": "class"}, {"_type": "tag", "name": "contextValue", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^  const contextValue = {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "courseId", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^      const courseId = await saveCourse(courseData);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "courses", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^    courses,$/", "language": "JavaScript", "kind": "field", "scope": "contextValue", "scopeKind": "class"}, {"_type": "tag", "name": "deleteCourseById", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^  const deleteCourseById = async (courseId) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "deleteRoomById", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^  const deleteRoomById = async (roomId) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handleCloseNotification", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^  const handleCloseNotification = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^          id: courseId,$/", "language": "JavaScript", "kind": "property", "scope": "newCourse", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^          id: roomId,$/", "language": "JavaScript", "kind": "property", "scope": "newRoom", "scopeKind": "class"}, {"_type": "tag", "name": "loadInitialData", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^  const loadInitialData = useCallback(async () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "newCourse", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^        const newCourse = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "newRoom", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^        const newRoom = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "refreshData", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^  const refreshData = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "removeCourseFromSlot", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^  const removeCourseFromSlot = async (courseId, day, time) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "resolveConflict", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^  const resolveConflict = async (conflict, resolution) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "result", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^      const result = await unscheduleCourse(courseId, day, time);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "roomId", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^      const roomId = await saveRoom(roomData);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setConflicts", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^  const [conflicts, setConflicts] = useState([]);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setCourses", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^  const [courses, setCourses] = useState([]);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setCurrentAcademicYear", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^  const [currentAcademicYear, setCurrentAcademicYear] = useState('2023-2024');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setErrors", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^  const [errors, setErrors] = useState({});$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setIsLoading", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^  const [isLoading, setIsLoading] = useState(true);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setNotification", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^  const [notification, setNotification] = useState({$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setRoomAllocations", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^  const [roomAllocations, setRoomAllocations] = useState({});$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setRooms", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^  const [rooms, setRooms] = useState([]);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setSchedule", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^  const [schedule, setSchedule] = useState({});$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "showNotification", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^  const showNotification = (message, severity = 'info') => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "slotId", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^      const slotId = `${day}-${time}`;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "success", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^      const success = await deleteCourse(courseId);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "success", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^      const success = await deleteRoom(roomId);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "success", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^      const success = await saveCourse(courseData);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "success", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^      const success = await saveRoom(roomData);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "supabase", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^  const supabase = createClient(supabaseUrl, supabaseAnonKey);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "supabaseAnonKey", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^  const supabaseAnonKey = process.env.REACT_APP_SUPABASE_ANON_KEY || 'your-supabase-anon-key';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "supabaseUrl", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^  const supabaseUrl = process.env.REACT_APP_SUPABASE_URL || 'https:\\/\\/your-supabase-url.supabas/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "updateAllocations", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^  const updateAllocations = (scheduleData) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "updateCourse", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^  const updateCourse = async (courseData) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "updateRoom", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^  const updateRoom = async (roomData) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "updatedConflicts", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^        const updatedConflicts = findScheduleConflicts(schedule);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "updatedConflicts", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^      const updatedConflicts = findScheduleConflicts(schedule);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "useSchedule", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "pattern": "/^export const useSchedule = () => {$/", "language": "JavaScript", "kind": "constant"}], "filename": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/context/ScheduleContext.js", "hash": "3176e83f15d730e738b13fc7f460e116", "format-version": 4, "code-base-name": "default", "fields": [{"name": "export const ScheduleProvider = ({ children }) => {", "scope": "ScheduleProvider", "scopeKind": "class", "description": "unavailable"}, {"name": "<ScheduleContext.Provider value={contextValue}>", "scope": "Provider", "scopeKind": "class", "description": "unavailable"}, {"name": "courses,", "scope": "contextValue", "scopeKind": "class", "description": "unavailable"}, {"name": "id: courseId,", "scope": "newCourse", "scopeKind": "class", "description": "unavailable"}, {"name": "id: roomId,", "scope": "newRoom", "scopeKind": "class", "description": "unavailable"}]}