{"is_source_file": true, "format": "JavaScript", "description": "This file contains enhanced functions for saving rooms, courses, and faculty entities with robust validation, sanitization, and related entity handling using Supabase as the backend. It includes external dependencies, validation utilities, and error handling mechanisms.", "external_files": ["./supabaseClient", "./validationUtils", "./supabaseErrorHandler"], "external_methods": ["supabase.from", "validateRoom", "validateCourse", "validateFaculty", "handleSupabaseError", "getOrCreateDepartment", "getOrCreateBuilding", "getOrCreateEquipment", "getOrCreateAcademicYear"], "published": ["enhancedSaveRoom", "enhancedSaveCourse", "enhancedSaveFaculty"], "classes": [], "methods": [{"name": "enhancedSaveRoom", "description": "Saves a room entity with validation and related equipment handling, including error management."}, {"name": "enhancedSaveCourse", "description": "Saves a course entity with validation, including handling of associated equipment and related entities."}, {"name": "enhancedSaveFaculty", "description": "Saves a faculty entity with validation and manages associated expertise and department relations."}, {"name": "getOrCreateAcademicYear(name)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "getOrCreateBuilding(name)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "getOrCreateDepartment(name)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "getOrCreateEquipment(name)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["validateRoom", "validateCourse", "validateFaculty", "handleSupabaseError", "supabase.from", "getOrCreateBuilding", "getOrCreateDepartment", "getOrCreateEquipment", "getOrCreateAcademicYear"], "search-terms": ["enhancedSaveRoom", "validationUtils", "supabaseClient", "room_equipment", "course_equipment", "faculty_expertise", "getOrCreateDepartment", "getOrCreateBuilding", "getOrCreateEquipment", "getOrCreateAcademicYear"], "state": 2, "file_id": 181, "knowledge_revision": 482, "git_revision": "e8179554662735cd8fcab74905b9b2ae638a9b46", "revision_history": [{"664": "6869ca4d522d90703a0d15b99d2cc11cc25c1a95"}, {"692": "f98ccf1e8f3e4103440d297625beeb189778db2c"}, {"693": "d48784dc5d35cbd3e8aa8ea76de654ff743a8041"}, {"694": "d48784dc5d35cbd3e8aa8ea76de654ff743a8041"}, {"700": "22b6c8103eeda675962c9f9cfad846b4768e8660"}, {"703": "84a83ce67f05ea275b41625968a8dddd2a7006f3"}, {"704": "9d61147c731a034a0047d6d307ad87935d9c2621"}, {"705": "9d61147c731a034a0047d6d307ad87935d9c2621"}, {"706": "9d61147c731a034a0047d6d307ad87935d9c2621"}, {"707": "ed413e2ac5e06791d6b831c110d0b7ef307154d9"}, {"708": "724ba762a7f84c53ed969bb4a508d5324565997d"}, {"714": "849e42243a52e4552f64a0eaaad147c087f07315"}, {"451": "5c6cdff54919e6c5f5fdd6813262b12169a35cb5"}, {"452": "06f8003e3ce76b3fa14d3af312b100ad80b18398"}, {"453": "06f8003e3ce76b3fa14d3af312b100ad80b18398"}, {"482": "e8179554662735cd8fcab74905b9b2ae638a9b46"}], "ctags": [{"_type": "tag", "name": "academicYearId", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^    const [departmentId, academicYearId] = await Promise.all([$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "academic_year_id", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      academic_year_id: academicYearId$/", "language": "JavaScript", "kind": "property", "scope": "courseData", "scopeKind": "class"}, {"_type": "tag", "name": "buildingId", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^    const buildingId = await getOrCreateBuilding(sanitizedRoom.building);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "building_id", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      building_id: buildingId$/", "language": "JavaScript", "kind": "property", "scope": "roomData", "scopeKind": "class"}, {"_type": "tag", "name": "capacity", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      capacity: sanitizedRoom.capacity,$/", "language": "JavaScript", "kind": "property", "scope": "roomData", "scopeKind": "class"}, {"_type": "tag", "name": "code", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      code: sanitizedCourse.code,$/", "language": "JavaScript", "kind": "property", "scope": "courseData", "scopeKind": "class"}, {"_type": "tag", "name": "courseData", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^    const courseData = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "credits", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      credits: sanitizedCourse.credits,$/", "language": "JavaScript", "kind": "property", "scope": "courseData", "scopeKind": "class"}, {"_type": "tag", "name": "departmentId", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^    const departmentId = sanitizedFaculty.department ? $/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "department_id", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      department_id: departmentId,$/", "language": "JavaScript", "kind": "property", "scope": "courseData", "scopeKind": "class"}, {"_type": "tag", "name": "department_id", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      department_id: departmentId,$/", "language": "JavaScript", "kind": "property", "scope": "facultyData", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      email: sanitizedFaculty.email,$/", "language": "JavaScript", "kind": "property", "scope": "facultyData", "scopeKind": "class"}, {"_type": "tag", "name": "enhancedSaveCourse", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^export const enhancedSaveCourse = async (course) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "enhancedSaveFaculty", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^export const enhancedSaveFaculty = async (faculty) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "enhancedSaveRoom", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^export const enhancedSaveRoom = async (room) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "equipmentPromises", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      const equipmentPromises = sanitizedCourse.requiredEquipment.map(async (item) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "equipmentPromises", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      const equipmentPromises = sanitizedRoom.equipment.map(async (item) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "expected_enrollment", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      expected_enrollment: sanitizedCourse.expectedEnrollment,$/", "language": "JavaScript", "kind": "property", "scope": "courseData", "scopeKind": "class"}, {"_type": "tag", "name": "expertiseRecords", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      const expertiseRecords = sanitizedFaculty.expertise.map(exp => ({$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "facultyData", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^    const facultyData = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "floor", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      floor: sanitizedRoom.floor,$/", "language": "JavaScript", "kind": "property", "scope": "roomData", "scopeKind": "class"}, {"_type": "tag", "name": "getOrCreateAcademicYear", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^async function getOrCreateAcademicYear(name) {$/", "language": "JavaScript", "kind": "function", "signature": "(name)"}, {"_type": "tag", "name": "getOrCreateBuilding", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^async function getOrCreateBuilding(name) {$/", "language": "JavaScript", "kind": "function", "signature": "(name)"}, {"_type": "tag", "name": "getOrCreateDepartment", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^async function getOrCreateDepartment(name) {$/", "language": "JavaScript", "kind": "function", "signature": "(name)"}, {"_type": "tag", "name": "getOrCreateEquipment", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^async function getOrCreateEquipment(name) {$/", "language": "JavaScript", "kind": "function", "signature": "(name)"}, {"_type": "tag", "name": "handledError", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      const handledError = handleSupabaseError(error, 'Saving course');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handledError", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      const handledError = handleSupabaseError(error, 'Saving faculty');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handledError", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      const handledError = handleSupabaseError(error, 'Saving room');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handledError", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^    const handledError = handleSupabaseError(error, 'Saving course');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handledError", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^    const handledError = handleSupabaseError(error, 'Saving faculty');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handledError", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^    const handledError = handleSupabaseError(error, 'Saving room');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      name: sanitizedCourse.name,$/", "language": "JavaScript", "kind": "property", "scope": "courseData", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      name: sanitizedFaculty.name,$/", "language": "JavaScript", "kind": "property", "scope": "facultyData", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      name: sanitizedRoom.name,$/", "language": "JavaScript", "kind": "property", "scope": "roomData", "scopeKind": "class"}, {"_type": "tag", "name": "requires_lab", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      requires_lab: sanitizedCourse.requiresLab,$/", "language": "JavaScript", "kind": "property", "scope": "courseData", "scopeKind": "class"}, {"_type": "tag", "name": "roomData", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^    const roomData = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "sanitizedCourse", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^    const sanitizedCourse = validation.sanitized;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "sanitizedFaculty", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^    const sanitizedFaculty = validation.sanitized;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "sanitizedRoom", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^    const sanitizedRoom = validation.sanitized;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      status: sanitizedFaculty.status$/", "language": "JavaScript", "kind": "property", "scope": "facultyData", "scopeKind": "class"}, {"_type": "tag", "name": "type", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      type: sanitizedRoom.type,$/", "language": "JavaScript", "kind": "property", "scope": "roomData", "scopeKind": "class"}, {"_type": "tag", "name": "validation", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^    const validation = validateCourse(course);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "validation", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^    const validation = validateFaculty(faculty);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "validation", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^    const validation = validateRoom(room);$/", "language": "JavaScript", "kind": "constant"}], "filename": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "hash": "678de459a7ea8854ded7892bf1dc376c", "format-version": 4, "code-base-name": "default", "fields": [{"name": "academic_year_id: academicYearId", "scope": "courseData", "scopeKind": "class", "description": "unavailable"}, {"name": "building_id: buildingId", "scope": "roomData", "scopeKind": "class", "description": "unavailable"}, {"name": "capacity: sanitizedRoom.capacity,", "scope": "roomData", "scopeKind": "class", "description": "unavailable"}, {"name": "code: sanitizedCourse.code,", "scope": "courseData", "scopeKind": "class", "description": "unavailable"}, {"name": "credits: sanitizedCourse.credits,", "scope": "courseData", "scopeKind": "class", "description": "unavailable"}, {"name": "department_id: departmentId,", "scope": "courseData", "scopeKind": "class", "description": "unavailable"}, {"name": "email: sanitizedFaculty.email,", "scope": "facultyData", "scopeKind": "class", "description": "unavailable"}, {"name": "expected_enrollment: sanitizedCourse.expectedEnrollment,", "scope": "courseData", "scopeKind": "class", "description": "unavailable"}, {"name": "floor: sanitizedRoom.floor,", "scope": "roomData", "scopeKind": "class", "description": "unavailable"}, {"name": "name: sanitizedCourse.name,", "scope": "courseData", "scopeKind": "class", "description": "unavailable"}, {"name": "name: sanitizedFaculty.name,", "scope": "facultyData", "scopeKind": "class", "description": "unavailable"}, {"name": "name: sanitizedRoom.name,", "scope": "roomData", "scopeKind": "class", "description": "unavailable"}, {"name": "requires_lab: sanitizedCourse.requiresLab,", "scope": "courseData", "scopeKind": "class", "description": "unavailable"}, {"name": "status: sanitizedFaculty.status", "scope": "facultyData", "scopeKind": "class", "description": "unavailable"}, {"name": "type: sanitizedRoom.type,", "scope": "roomData", "scopeKind": "class", "description": "unavailable"}]}