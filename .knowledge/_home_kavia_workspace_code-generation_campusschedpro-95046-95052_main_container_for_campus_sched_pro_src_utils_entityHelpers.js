{"is_source_file": true, "format": "JavaScript", "description": "This file contains utility functions for saving admin-related entities like rooms, courses, and faculty in an educational scheduling system. It includes detailed error handling, validation, and management of related entities such as departments, buildings, equipment, and academic years, primarily interacting with a Supabase backend.", "external_files": ["./supabaseClient", "./validationUtils"], "external_methods": ["supabase.from", "validateRoom", "validateCourse", "validateFaculty"], "published": ["enhancedSaveRoom", "enhancedSaveCourse", "enhancedSaveFaculty"], "classes": [], "methods": [{"name": "enhancedSaveRoom", "description": "Saves or updates a Room object with validation and handles associated equipment, providing detailed success/error information."}, {"name": "enhancedSaveCourse", "description": "Saves or updates a Course object with validation, handles required equipment, and associates it with departments and academic years."}, {"name": "enhancedSaveFaculty", "description": "Saves or updates a Faculty object with validation, manages expertise records, and links to a department."}, {"name": "getOrCreateDepartment(name)", "description": "Fetches or creates a department by name, returning its ID.", "scope": "", "scopeKind": ""}, {"name": "getOrCreateBuilding(name)", "description": "Fetches or creates a building by name, returning its ID.", "scope": "", "scopeKind": ""}, {"name": "getOrCreateEquipment(name)", "description": "Fetches or creates equipment type by name, returning its ID.", "scope": "", "scopeKind": ""}, {"name": "getOrCreateAcademicYear(name)", "description": "Fetches or creates an academic year by name, returning its ID.", "scope": "", "scopeKind": ""}], "calls": ["supabase.from", "validateRoom", "validateCourse", "validateFaculty", "getOrCreateBuilding", "getOrCreateDepartment", "getOrCreateEquipment", "getOrCreateAcademicYear"], "search-terms": ["enhancedSaveRoom", "enhancedSaveCourse", "enhancedSaveFaculty", "supabaseClient", "validationUtils", "room", "course", "faculty", "department", "building", "equipment", "academicYear"], "state": 2, "file_id": 181, "knowledge_revision": 453, "git_revision": "06f8003e3ce76b3fa14d3af312b100ad80b18398", "revision_history": [{"664": "6869ca4d522d90703a0d15b99d2cc11cc25c1a95"}, {"692": "f98ccf1e8f3e4103440d297625beeb189778db2c"}, {"693": "d48784dc5d35cbd3e8aa8ea76de654ff743a8041"}, {"694": "d48784dc5d35cbd3e8aa8ea76de654ff743a8041"}, {"700": "22b6c8103eeda675962c9f9cfad846b4768e8660"}, {"703": "84a83ce67f05ea275b41625968a8dddd2a7006f3"}, {"704": "9d61147c731a034a0047d6d307ad87935d9c2621"}, {"705": "9d61147c731a034a0047d6d307ad87935d9c2621"}, {"706": "9d61147c731a034a0047d6d307ad87935d9c2621"}, {"707": "ed413e2ac5e06791d6b831c110d0b7ef307154d9"}, {"708": "724ba762a7f84c53ed969bb4a508d5324565997d"}, {"714": "849e42243a52e4552f64a0eaaad147c087f07315"}, {"451": "5c6cdff54919e6c5f5fdd6813262b12169a35cb5"}, {"452": "06f8003e3ce76b3fa14d3af312b100ad80b18398"}, {"453": "06f8003e3ce76b3fa14d3af312b100ad80b18398"}], "ctags": [{"_type": "tag", "name": "academicYearId", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^    const academicYearId = course.academicYear ? $/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "academic_year_id", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      academic_year_id: academicYearId$/", "language": "JavaScript", "kind": "property", "scope": "courseData", "scopeKind": "class"}, {"_type": "tag", "name": "buildingId", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^    const buildingId = await getOrCreateBuilding(room.building);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "building_id", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      building_id: buildingId$/", "language": "JavaScript", "kind": "property", "scope": "roomData", "scopeKind": "class"}, {"_type": "tag", "name": "capacity", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      capacity: room.capacity || 0,$/", "language": "JavaScript", "kind": "property", "scope": "roomData", "scopeKind": "class"}, {"_type": "tag", "name": "code", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      code: course.code,$/", "language": "JavaScript", "kind": "property", "scope": "courseData", "scopeKind": "class"}, {"_type": "tag", "name": "courseData", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^    const courseData = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "credits", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      credits: course.credits || 0,$/", "language": "JavaScript", "kind": "property", "scope": "courseData", "scopeKind": "class"}, {"_type": "tag", "name": "departmentId", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^    const departmentId = course.department ? $/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "departmentId", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^    const departmentId = faculty.department ? $/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "department_id", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      department_id: departmentId,$/", "language": "JavaScript", "kind": "property", "scope": "courseData", "scopeKind": "class"}, {"_type": "tag", "name": "department_id", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      department_id: departmentId,$/", "language": "JavaScript", "kind": "property", "scope": "facultyData", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      email: faculty.email,$/", "language": "JavaScript", "kind": "property", "scope": "facultyData", "scopeKind": "class"}, {"_type": "tag", "name": "enhancedSaveCourse", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^export const enhancedSaveCourse = async (course) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "enhancedSaveFaculty", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^export const enhancedSaveFaculty = async (faculty) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "enhancedSaveRoom", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^export const enhancedSaveRoom = async (room) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "equipmentId", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^        const equipmentId = await getOrCreateEquipment(item);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "expected_enrollment", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      expected_enrollment: course.expectedEnrollment || 0,$/", "language": "JavaScript", "kind": "property", "scope": "courseData", "scopeKind": "class"}, {"_type": "tag", "name": "expertiseRecords", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      const expertiseRecords = faculty.expertise.map(exp => ({$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "facultyData", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^    const facultyData = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "floor", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      floor: room.floor || '1',$/", "language": "JavaScript", "kind": "property", "scope": "roomData", "scopeKind": "class"}, {"_type": "tag", "name": "getOrCreateAcademicYear", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^async function getOrCreateAcademicYear(name) {$/", "language": "JavaScript", "kind": "function", "signature": "(name)"}, {"_type": "tag", "name": "getOrCreateBuilding", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^async function getOrCreateBuilding(name) {$/", "language": "JavaScript", "kind": "function", "signature": "(name)"}, {"_type": "tag", "name": "getOrCreateDepartment", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^async function getOrCreateDepartment(name) {$/", "language": "JavaScript", "kind": "function", "signature": "(name)"}, {"_type": "tag", "name": "getOrCreateEquipment", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^async function getOrCreateEquipment(name) {$/", "language": "JavaScript", "kind": "function", "signature": "(name)"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      name: course.name,$/", "language": "JavaScript", "kind": "property", "scope": "courseData", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      name: faculty.name,$/", "language": "JavaScript", "kind": "property", "scope": "facultyData", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      name: room.name,$/", "language": "JavaScript", "kind": "property", "scope": "roomData", "scopeKind": "class"}, {"_type": "tag", "name": "requires_lab", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      requires_lab: course.requiresLab || false,$/", "language": "JavaScript", "kind": "property", "scope": "courseData", "scopeKind": "class"}, {"_type": "tag", "name": "roomData", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^    const roomData = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      status: faculty.status || 'Available'$/", "language": "JavaScript", "kind": "property", "scope": "facultyData", "scopeKind": "class"}, {"_type": "tag", "name": "type", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^      type: room.type,$/", "language": "JavaScript", "kind": "property", "scope": "roomData", "scopeKind": "class"}, {"_type": "tag", "name": "validation", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^    const validation = validateCourse(course);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "validation", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^    const validation = validateFaculty(faculty);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "validation", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "pattern": "/^    const validation = validateRoom(room);$/", "language": "JavaScript", "kind": "constant"}], "filename": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/utils/entityHelpers.js", "hash": "2a5d9122f7a86bc614454baa6f5210eb", "format-version": 4, "code-base-name": "default", "fields": [{"name": "academic_year_id: academicYearId", "scope": "courseData", "scopeKind": "class", "description": "unavailable"}, {"name": "building_id: buildingId", "scope": "roomData", "scopeKind": "class", "description": "unavailable"}, {"name": "capacity: room.capacity || 0,", "scope": "roomData", "scopeKind": "class", "description": "unavailable"}, {"name": "code: course.code,", "scope": "courseData", "scopeKind": "class", "description": "unavailable"}, {"name": "credits: course.credits || 0,", "scope": "courseData", "scopeKind": "class", "description": "unavailable"}, {"name": "department_id: departmentId,", "scope": "courseData", "scopeKind": "class", "description": "unavailable"}, {"name": "email: faculty.email,", "scope": "facultyData", "scopeKind": "class", "description": "unavailable"}, {"name": "expected_enrollment: course.expectedEnrollment || 0,", "scope": "courseData", "scopeKind": "class", "description": "unavailable"}, {"name": "floor: room.floor || '1',", "scope": "roomData", "scopeKind": "class", "description": "unavailable"}, {"name": "name: course.name,", "scope": "courseData", "scopeKind": "class", "description": "unavailable"}, {"name": "name: faculty.name,", "scope": "facultyData", "scopeKind": "class", "description": "unavailable"}, {"name": "name: room.name,", "scope": "roomData", "scopeKind": "class", "description": "unavailable"}, {"name": "requires_lab: course.requiresLab || false,", "scope": "courseData", "scopeKind": "class", "description": "unavailable"}, {"name": "status: faculty.status || 'Available'", "scope": "facultyData", "scopeKind": "class", "description": "unavailable"}, {"name": "type: room.type,", "scope": "roomData", "scopeKind": "class", "description": "unavailable"}]}