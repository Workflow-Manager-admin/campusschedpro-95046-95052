{"is_source_file": true, "format": "JavaScript (React JSX)", "description": "This source file defines a React component 'ShareScheduleButton' that allows users to capture a schedule element as an image, download it, and display a preview with success notification. It utilizes the 'html2canvas' library for rendering HTML content into an image.", "external_files": ["react", "prop-types", "html2canvas", "@mui/material"], "external_methods": ["html2canvas"], "published": ["ShareScheduleButton"], "classes": [], "methods": [{"name": "generateFilename", "description": "Generates a filename for the schedule image based on the current date and academic year."}, {"name": "handleCaptureSchedule", "description": "Handles the process of capturing the schedule element as an image, triggering the download, and managing UI notifications."}, {"name": "handleCloseSuccessDialog", "description": "Closes the success dialog and clears the preview URL."}], "calls": ["html2canvas", "document.createElement('a')", "link.click()", "link.remove()", "setTimeout"], "search-terms": ["ShareScheduleButton", "html2canvas import", "schedule image capture", "download schedule as image", "capture schedule React component"], "state": 2, "file_id": 107, "knowledge_revision": 749, "git_revision": "b79edfe25ef9b3be4fa34334616c7d023649bd5d", "revision_history": [{"397": "88b34ca5c2c4d796b58ed7a92ec27ed064487d0a"}, {"403": "cdabc398dde34328cd83ee0b3253a47629901689"}, {"404": "cdabc398dde34328cd83ee0b3253a47629901689"}, {"406": "c00ec895b55a2dff285ea952f19b42d37590ccf9"}, {"411": "50e8a767decbead0f6d1350ce9e020c300558fa2"}, {"748": "b79edfe25ef9b3be4fa34334616c7d023649bd5d"}, {"749": "b79edfe25ef9b3be4fa34334616c7d023649bd5d"}], "ctags": [{"_type": "tag", "name": "ShareScheduleButton", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/components/ShareScheduleButton.js", "pattern": "/^const ShareScheduleButton = ({ targetRef, onNotification, academicYear }) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "academicYear", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/components/ShareScheduleButton.js", "pattern": "/^  academicYear: PropTypes.string$/", "language": "JavaScript", "kind": "property", "scope": "ShareScheduleButton.propTypes", "scopeKind": "class"}, {"_type": "tag", "name": "academicYearPart", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/components/ShareScheduleButton.js", "pattern": "/^    const academicYearPart = academicYear && academicYear !== 'All Years'$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "canvas", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/components/ShareScheduleButton.js", "pattern": "/^      const canvas = await html2canvas(timetableEl, {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "date", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/components/ShareScheduleButton.js", "pattern": "/^    const date = new Date();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "day", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/components/ShareScheduleButton.js", "pattern": "/^    const day = String(date.getDate()).padStart(2, '0');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "generateFilename", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/components/ShareScheduleButton.js", "pattern": "/^  const generateFilename = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handleCaptureSchedule", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/components/ShareScheduleButton.js", "pattern": "/^        onClick={handleCaptureSchedule}$/", "language": "JavaScript", "kind": "field", "scope": "onClick", "scopeKind": "class"}, {"_type": "tag", "name": "handleCaptureSchedule", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/components/ShareScheduleButton.js", "pattern": "/^  const handleCaptureSchedule = async () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handleCloseSuccessDialog", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/components/ShareScheduleButton.js", "pattern": "/^        onClose={handleCloseSuccessDialog}$/", "language": "JavaScript", "kind": "field", "scope": "onClose", "scopeKind": "class"}, {"_type": "tag", "name": "handleCloseSuccessDialog", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/components/ShareScheduleButton.js", "pattern": "/^  const handleCloseSuccessDialog = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "imageData", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/components/ShareScheduleButton.js", "pattern": "/^      const imageData = canvas.toDataURL('image\\/png', 1.0);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "isCapturing", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/components/ShareScheduleButton.js", "pattern": "/^        disabled={isCapturing}$/", "language": "JavaScript", "kind": "field", "scope": "disabled", "scopeKind": "class"}, {"_type": "tag", "name": "isCapturing", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/components/ShareScheduleButton.js", "pattern": "/^        startIcon={isCapturing ? <CircularProgress size={20} color=\"inherit\" \\/> : '\ud83d\udce5'}$/", "language": "JavaScript", "kind": "field", "scope": "startIcon", "scopeKind": "class"}, {"_type": "tag", "name": "link", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/components/ShareScheduleButton.js", "pattern": "/^      const link = document.createElement('a');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "month", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/components/ShareScheduleButton.js", "pattern": "/^    const month = String(date.getMonth() + 1).padStart(2, '0');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "onNotification", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/components/ShareScheduleButton.js", "pattern": "/^  onNotification: PropTypes.func,$/", "language": "JavaScript", "kind": "property", "scope": "ShareScheduleButton.propTypes", "scopeKind": "class"}, {"_type": "tag", "name": "propTypes", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/components/ShareScheduleButton.js", "pattern": "/^ShareScheduleButton.propTypes = {$/", "language": "JavaScript", "kind": "class", "scope": "ShareScheduleButton", "scopeKind": "class"}, {"_type": "tag", "name": "setCapturedPreviewUrl", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/components/ShareScheduleButton.js", "pattern": "/^  const [capturedPreviewUrl, setCapturedPreviewUrl] = useState('');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setIsCapturing", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/components/ShareScheduleButton.js", "pattern": "/^  const [isCapturing, setIsCapturing] = useState(false);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setShowSuccessDialog", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/components/ShareScheduleButton.js", "pattern": "/^  const [showSuccessDialog, setShowSuccessDialog] = useState(false);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "showSuccessDialog", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/components/ShareScheduleButton.js", "pattern": "/^        open={showSuccessDialog}$/", "language": "JavaScript", "kind": "field", "scope": "open", "scopeKind": "class"}, {"_type": "tag", "name": "targetRef", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/components/ShareScheduleButton.js", "pattern": "/^  targetRef: PropTypes.shape({ current: PropTypes.instanceOf(Element) }),$/", "language": "JavaScript", "kind": "property", "scope": "ShareScheduleButton.propTypes", "scopeKind": "class"}, {"_type": "tag", "name": "targetRef", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/components/ShareScheduleButton.js", "pattern": "/^const ShareScheduleButton = ({ targetRef, onNotification, academicYear }) => {$/", "language": "JavaScript", "kind": "field", "scope": "ShareScheduleButton", "scopeKind": "class"}, {"_type": "tag", "name": "timetableEl", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/components/ShareScheduleButton.js", "pattern": "/^      const timetableEl = targetRef.current;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "year", "path": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/components/ShareScheduleButton.js", "pattern": "/^    const year = date.getFullYear();$/", "language": "JavaScript", "kind": "constant"}], "filename": "/home/kavia/workspace/code-generation/campusschedpro-95046-95052/main_container_for_campus_sched_pro/src/components/ShareScheduleButton.js", "hash": "96b10f82501990ec8c0e766561757a6f", "format-version": 4, "code-base-name": "default", "fields": [{"name": "academicYear: PropTypes.string", "scope": "ShareScheduleButton.propTypes", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={handleCaptureSchedule}", "scope": "onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "onClose={handleCloseSuccessDialog}", "scope": "onClose", "scopeKind": "class", "description": "unavailable"}, {"name": "disabled={isCapturing}", "scope": "disabled", "scopeKind": "class", "description": "unavailable"}, {"name": "startIcon={isCapturing ? <CircularProgress size={20} color=\"inherit\" \\/> : '\ud83d\udce5'}", "scope": "startIcon", "scopeKind": "class", "description": "unavailable"}, {"name": "onNotification: PropTypes.func,", "scope": "ShareScheduleButton.propTypes", "scopeKind": "class", "description": "unavailable"}, {"name": "open={showSuccessDialog}", "scope": "open", "scopeKind": "class", "description": "unavailable"}, {"name": "targetRef: PropTypes.shape({ current: PropTypes.instanceOf(Element) }),", "scope": "ShareScheduleButton.propTypes", "scopeKind": "class", "description": "unavailable"}, {"name": "const ShareScheduleButton = ({ targetRef, onNotification, academicYear }) => {", "scope": "ShareScheduleButton", "scopeKind": "class", "description": "unavailable"}]}